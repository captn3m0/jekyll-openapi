---
---


{% comment %}
<!--
OpenAPI Specification

https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md
-->
{% endcomment %}
{% assign api = site.data.openapi %}


{% comment %}
<!--
Servers

An array of Server Objects, which provide connectivity information to a target
server. If the servers property is not provided, or is an empty array, the
default value would be a Server Object with a url value of /.

https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#serverObject
-->
{% endcomment %}
{% if api.servers.first.url %}
  {% assign servers = api.servers %}
{% else %}
  {% assign servers = site.data.defaults.servers %}
{% endif %}


{% comment %}
<!--
Collections

OpenAPI does not group paths into collections - we need to do this manually.
-->
{% endcomment %}
{% assign collections = "" %}
{% for path in api.paths %}
  {% assign path_parts = path[0] | split: '/' %}
  {% assign collections = collections | append: path_parts[1] | append: ',' %}
{% endfor %}
{% assign collections = collections | split: ',' | uniq %}


<div class="row no-gutters">

  <nav class="d-none d-xl-block col-xl-2 bg-light border-right py-4">
    <ul class="nav flex-column">
      <li class="nav-item">
        <a class="nav-link" href="#introduction">Introduction</a>
      </li>
      {% for collection in collections %}
        <li class="nav-item">
          <a class="nav-link" href="#{{ collection }}">{% include titleize.html word=collection %}</a>
        </li>
      {% endfor %}
    </ul>
  </nav>

  <div class="col-12 col-xl-10">

    <div class="row no-gutters">
      <div class="col-12 col-lg-7 bg-white border-bottom p-4">
        <h1 class="h3" id="introduction">{{ api.info.title | xml_escape }} <small class="text-muted">v{{ api.info.version }}</small></h1>
        {% if api.info.description %}
          <p class="lead">{{ api.info.description | xml_escape }}</p>
        {% endif %}
      </div>
      <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark p-4">
        <pre class="text-white">&nbsp;</pre>
      </div>
    </div>

    {% for collection in collections %}

      <div class="row no-gutters">
        <div class="col-12 col-lg-7 bg-white border-bottom p-4">
          <h1 class="h4" id="{{ collection }}">{% include titleize.html word=collection %}</h1>
        </div>
        <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark p-4">
          <pre class="text-white">&nbsp;</pre>
        </div>
      </div>


      {% comment %}
      <!--
      Paths

      REQUIRED. The available paths and operations for the API.

      https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#pathsObject
      -->
      {% endcomment %}
      {% for path in api.paths %}
        {% assign path_parts = path[0] | split: '/' %}
        {% if path_parts[1] == collection %}
          {% for operation in path[1] %}
            {% assign operation_type = operation[0] %}
            <div class="row no-gutters">
              <div class="col-12 col-lg-7 bg-white border-bottom p-4">
                <h2 class="h5 mb-3">
                  {% include operation.html type=operation_type %}
                  {% if operation[1].summary %}
                    {{ operation[1].summary }}
                  {% else %}
                    {{ path[0] }}
                  {% endif %}
                </h2>

                {% if operation[1].description %}
                  <p>{{ operation[1].description | newline_to_br }}</p>
                {% endif %}

                <pre class="p-2 border rounded bg-light">{{ api.servers.first.url }}{{ path[0] }}</pre>

                {% assign operation_parameters = operation[1].parameters %}
                {% if operation_parameters %}
                  {% assign query_parameters = false %}
                  {% assign header_parameters = false %}
                  {% assign path_parameters = false %}
                  {% assign cookie_parameters = false %}
                  {% for parameter in operation_parameters %}
                    {% case parameter.in %}
                      {% when 'query' %}
                        {% assign query_parameters = true %}
                      {% when 'header' %}
                        {% assign header_parameters = true %}
                      {% when 'path' %}
                        {% assign path_parameters = true %}
                      {% when 'cookie' %}
                        {% assign cookie_parameters = true %}
                    {% endcase %}
                  {% endfor %}
                  {% if header_parameters %}
                    <h3 class="h6">Headers</h3>
                    {% include parameters.html parameters=operation_parameters in="header" %}
                  {% endif %}
                  {% if cookie_parameters %}
                    <h3 class="h6">Cookies</h3>
                    {% include parameters.html parameters=operation_parameters in="cookie" %}
                  {% endif %}
                  {% if path_parameters %}
                    <h3 class="h6">Path Variables</h3>
                    {% include parameters.html parameters=operation_parameters in="path" %}
                  {% endif %}
                  {% if query_parameters %}
                    <h3 class="h6">Query Parameters</h3>
                    {% include parameters.html parameters=operation_parameters in="query" %}
                  {% endif %}
                {% endif %}

                <h3 class="h6">Body <small class="text-muted">raw (application/vnd.api+json)</small></h3>
                <div class="card bg-light">
                  <pre class="card-body">{
  "data": {
    "type": "actions",
    "id": "string",
    "attributes": {
      "errors": {},
      "name": "string",
      "started_at": "2019-09-20T00:13:44.065Z"
    }
  }
}</pre>
                </div>
              </div>
              <div class="col-12 col-lg-5 bg-dark border-bottom-dark">
                <pre class="bg-black text-white m-0 p-4">var hiddenBox = $("#banner-message");
  $("#button-container button").on("click", function(event) {
  hiddenBox.show();
});</pre>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      {% endfor %}

    {% endfor %}

  </div>

</div>
