---
---


{% comment %}
<!--
API
-->
{% endcomment %}
{% assign api = site.data.openapi %}


{% comment %}
<!--
Collections
-->
{% endcomment %}
{% assign collections = "" %}
{% for path in api.paths %}
  {% assign path_parts = path[0] | split: '/' %}
  {% assign collections = collections | append: path_parts[1] | append: ',' %}
{% endfor %}
{% assign collections = collections | split: ',' | uniq %}


{% comment %}
<!--
Server
-->
{% endcomment %}
{% assign server = "/" %}
{% if api.servers.first.url %}
  {% assign server = api.servers.first.url %}
{% endif %}


<div class="row no-gutters">
  <div class="col-12 col-lg-7 bg-white border-bottom p-4">
    <h1 class="h3" id="introduction">
      {{ api.info.title }}
      <small class="text-muted">v{{ api.info.version }}</small>
    </h1>
    {% if api.info.description %}
      <p class="lead">{{ api.info.description }}</p>
    {% endif %}
  </div>
  <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark p-4">&nbsp;</div>
</div>

<div class="row no-gutters">
  <div class="col-12 col-lg-7 bg-white border-bottom p-4">
    <h1 class="h4" id="server">Server</h1>
    <pre class="p-2 border rounded bg-light">{{ server }}</pre>
  </div>
  <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark p-4">&nbsp;</div>
</div>

{% for collection in collections %}

  <div class="row no-gutters">
    <div class="col-12 col-lg-7 bg-white border-bottom p-4">
      <h1 class="h4" id="{{ collection }}">{% include titleize.html word=collection %}</h1>
    </div>
    <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark p-4">&nbsp;</div>
  </div>

  {% for path in api.paths %}
    {% assign path_parts = path[0] | split: '/' %}
    {% if path_parts[1] == collection %}
      {% for operation in path[1] %}
        {% assign operation_type = operation[0] %}
        <div class="row no-gutters">
          <div class="col-12 col-lg-7 bg-white border-bottom p-4">
            <h2 class="h5 mb-3">
              {% include operation.html type=operation_type %}
              {% if operation[1].summary %}
                {{ operation[1].summary }}
              {% else %}
                {{ path[0] }}
              {% endif %}
            </h2>

            {% if operation[1].description %}
              <p>{{ operation[1].description | newline_to_br }}</p>
            {% endif %}

            <pre class="p-2 border rounded bg-light">{{ server }}{{ path[0] }}</pre>

            {% assign operation_parameters = operation[1].parameters %}
            {% if operation_parameters %}

              {% assign header_parameters = false %}
              {% assign path_parameters = false %}
              {% assign query_parameters = false %}
              {% assign cookie_parameters = false %}

              {% for parameter in operation_parameters %}
                {% case parameter.in %}
                  {% when 'header' %}
                    {% assign header_parameters = true %}
                  {% when 'path' %}
                    {% assign path_parameters = true %}
                  {% when 'query' %}
                    {% assign query_parameters = true %}
                  {% when 'cookie' %}
                    {% assign cookie_parameters = true %}
                {% endcase %}
              {% endfor %}

              {% if header_parameters %}
                <h3 class="h6 mt-4">Headers</h3>
                {% include parameters.html parameters=operation_parameters in="header" %}
              {% endif %}

              {% if path_parameters %}
                <h3 class="h6 mt-4">Path Variables</h3>
                {% include parameters.html parameters=operation_parameters in="path" %}
              {% endif %}

              {% if query_parameters %}
                <h3 class="h6 mt-4">Query Parameters</h3>
                {% include parameters.html parameters=operation_parameters in="query" %}
              {% endif %}

              {% if cookie_parameters %}
                <h3 class="h6 mt-4">Cookies</h3>
                {% include parameters.html parameters=operation_parameters in="cookie" %}
              {% endif %}

            {% endif %}

            {% assign request_body = operation[1].requestBody %}
            {% if request_body %}
              <h3 class="h6">Body</h3>
              <div class="card bg-light">
                <pre class="card-body m-0">{{ request_body }}</pre>
              </div>
            {% endif %}

          </div>

          {% assign responses = operation[1].responses %}
          <div class="col-12 col-lg-5 bg-dark border-bottom-dark">
            <h2 class="h5 font-weight-normal mb-3 px-4 pt-4 text-white-50">Responses</h2>
            {% for response in responses %}
              <pre class="bg-black text-white m-0 p-4">{{ response }}</pre>
            {% endfor %}
          </div>

        </div>
      {% endfor %}
    {% endif %}
  {% endfor %}

{% endfor %}
