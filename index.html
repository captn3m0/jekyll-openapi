---
---

{%- include utils/variables.html -%}

<div class="row no-gutters">
  <div class="col-12 col-lg-7 bg-white border-bottom p-4">
    <h1 class="offset-top" id="introduction">
      {{- api.info.title -}}
      <small class="ml-2 text-muted">v{{- api.info.version -}}</small>
    </h1>
    {%- if api.info.description -%}
      <p class="lead">{{- api.info.description -}}</p>
    {%- endif -%}
  </div>
  <div class="d-lg-block col-lg-5 bg-dark border-bottom-dark">
    <dl class="row text-light small my-3 p-4">
      {%- if api.info.contact -%}
        <dt class="col-sm-3 col-lg-4">Contact</dt>
        <dd class="col-sm-9 col-lg-8">
          {%- if api.info.contact.name -%}
            {{- api.info.contact.name -}}
          {%- endif -%}
          {%- if api.info.contact.email -%}
            <br><a class="text-light" href="mailto:{{- api.info.contact.email -}}">{{- api.info.contact.email -}}</a>
          {%- endif -%}
          {%- if api.info.contact.url -%}
            <br><a class="text-light" href="{{- api.info.contact.url -}}" target="_blank">{{- api.info.contact.url -}}</a>
          {%- endif -%}
        </dd>
      {%- endif -%}
      {%- if api.info.license -%}
        <dt class="col-sm-3 col-lg-4">License</dt>
        <dd class="col-sm-9 col-lg-8">
          {%- if api.info.license.name -%}
            {{- api.info.license.name -}}
          {%- endif -%}
          {%- if api.info.license.url -%}
            <br><a class="text-light" href="{{- api.info.license.url -}}" target="_blank">{{- api.info.license.url -}}</a>
          {%- endif -%}
        </dd>
      {%- endif -%}
      {%- if api.info.termsOfService -%}
        <dt class="col-sm-3 col-lg-4">Terms of Service</dt>
        <dd class="col-sm-9 col-lg-8"><a class="text-light" href="{{- api.info.termsOfService -}}" target="_blank">{{- api.info.termsOfService -}}</a></dd>
      {%- endif -%}
      {%- if api.externalDocs -%}
        <dt class="col-sm-3 col-lg-4">{{- api.externalDocs.description -}}</dt>
        <dd class="col-sm-9 col-lg-8"><a class="text-light" href="{{- api.externalDocs.url -}}" target="_blank">{{- api.externalDocs.url -}}</a></dd>
      {%- endif -%}
    </dl>
  </div>
</div>

{%- unless server == '' -%}
  <div class="row no-gutters">
    <div class="col-12 col-lg-7 bg-white border-bottom p-4">
      <h1 class="h4 offset-top" id="server">Server</h1>
    </div>
    <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark">&nbsp;</div>
  </div>
  <div class="row no-gutters">
    <div class="col-12 col-lg-7 bg-white border-bottom p-4">
      <pre class="p-2 border rounded bg-light">{{- server -}}</pre>
    </div>
    <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark">&nbsp;</div>
  </div>
{%- endunless -%}

{%- for collection in collections -%}

  <div class="row no-gutters">
    <div class="col-12 col-lg-7 bg-white border-bottom p-4">
      <h1 class="h4 offset-top">{%- include utils/titleize.html word=collection -%}</h1>
    </div>
    <div class="d-none d-lg-block col-lg-5 bg-dark border-bottom-dark">&nbsp;</div>
  </div>

  {%- for path in api.paths -%}
    {%- assign path_parts = path[0] | split: '/' -%}
    {%- if path_parts[1] == collection -%}
      {%- for operation in path[1] -%}

        {%- assign method = operation[0] -%}
        {%- assign id = method | append: path[0] -%}
        {%- assign description = operation[1].description -%}
        {%- assign parameters = operation[1].parameters -%}
        {%- assign request_body = operation[1].requestBody -%}
        {%- assign responses = operation[1].responses -%}

        <div class="row no-gutters">
          <div class="col-12 col-lg-7 bg-white border-bottom p-4">
            <h2 class="h5 mb-3 offset-top" id="{%- include utils/idify.html text=id -%}">{% include utils/request.html method=method %} {{ path[0] }}</h2>

            {%- if description -%}
              <p>{{- description | newline_to_br -}}</p>
            {%- endif -%}

            <pre class="p-2 border rounded bg-light">{{- server -}}{{- path[0] -}}{% include utils/query.html parameters=parameters %}</pre>

            {%- if parameters -%}
              {%- include parameters.html parameters=parameters in='header' -%}
              {%- include parameters.html parameters=parameters in='path' -%}
              {%- include parameters.html parameters=parameters in='query' -%}
              {%- include parameters.html parameters=parameters in='cookie' -%}
            {%- endif -%}

            {%- if request_body -%}
              <h3 class="h6">Request Body</h3>
              {%- include request_body.html request_body=request_body -%}
            {%- endif -%}

          </div>

          <div class="d-lg-block col-lg-5 bg-dark border-bottom-dark">
            {%- if responses -%}
              <h2 class="h5 font-weight-normal mb-3 px-4 pt-4 text-white-50">Responses</h2>
              {%- for response in responses -%}
                {%- include response.html response=response -%}
              {%- endfor -%}
            {%- endif -%}
          </div>

        </div>

      {%- endfor -%}
    {%- endif -%}
  {%- endfor -%}
{%- endfor -%}
